window = query_bucket(find_bucket("aw-watcher-window_"));
not_afk = query_bucket(find_bucket("aw-watcher-afk_"));

not_afk = filter_keyvals(not_afk, "status", ["not-afk"]);
events = filter_period_intersect(window, not_afk);

cmt = "We should really add support for comments";

events = filter_keyvals_regex(events, "title", "activitywatch|ActivityWatch|aw-");
events = merge_events_by_keys(events, ["app", "title"]);
events = sort_by_duration(events);
RETURN = events;
